<!Doctype html>
<html>
	<head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<title>Discord WorkShop</title>
		<link rel="stylesheet" href="style.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
	</head>
	<body>
        <header>
            <nav class="navbar">
                <a href="#home" class="logo">Discord Workshop</a>
                <div class="nav-links">
                <ul>
                    <li><a href="#home">Acceuil</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#offres">Offres</a></li>
                    <li><a href="#" id="login">Se connecter</a></li>
                </ul>
                </div>
                <div class="burger">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
            </nav>	
        </header>
        <section id="home">
            <div class="home-content">
                <h1> Discord Workshop <i class="fas fa-cube"></i><br>ton <span>imagination</span></br>faite par nos mains !</h1>
                <a href="https://discord.gg/GHArER67fr" target="_blank" class="get-started">Commencer dès maintenant  <i class="fas fa-rocket"></i></a>
                <a href="#services" class="plus-infos"><i class="fas fa-info-circle"></i> Plus d'infos ?</a>
            </div>
            <div id="content"></div>
        </section>
        <section id="services">
            <h2 class="reveal">Nos Services</h2>
            <div class="reveal container">
                <div class="box">
                    <h3> Serveurs Discord <i class="fab fa-discord"></i></h3>
                    <p>Du concept au serveur parfait.</p>
                    <a href="https://discord.gg/GHArER67fr" target="_blank" class="commander">Passer Commande <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="box">
                    <h3> Ton Bot <i class="fas fa-robot"></i></h3>
                    <p>L'endroit où ton inspiration prend vie !</p>
                    <a href="https://discord.gg/GHArER67fr" target="_blank" class="commander">Passer Commande <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>
        <section id="offres">
            <h2 class="reveal">Nos offres</h2>
            <div class="reveal container2">
                <div class="box2">
                <h3> FREE </h3>
                <ul>
                    <li><i class="fas fa-circle-check"></i> 10 Commandes </li>
                    <li><i class="fas fa-circle-xmark"></i> +20 Commandes </li>
                    <li><i class="fas fa-circle-xmark"></i> +30 Commandes </li>
                    <li><i class="fas fa-circle-xmark"></i> Support Rapide </li>
                    <li><i class="fas fa-circle-xmark"></i> Projet Prioritaire </li>
                </ul>
                </div>
                <div class="box2">
                <h3> PRENIUM </h3>
                <ul>
                    <li><i class="fas fa-circle-check"></i> 10 Commandes </li>
                    <li><i class="fas fa-circle-check"></i> +20 Commandes </li>
                    <li><i class="fas fa-circle-xmark"></i> +30 Commandes </li>
                    <li><i class="fas fa-circle-check"></i> Support Rapide </li>
                    <li><i class="fas fa-circle-xmark"></i> Projet Prioritaire </li>
                </ul>
                </div>
                <div class="box3">
                <h3> MASTER <i class="fas fa-gem"></i> </h3>
                <ul>
                    <li><i class="fas fa-circle-check"></i> 10 Commandes </li>
                    <li><i class="fas fa-circle-check"></i> +20 Commandes </li>
                    <li><i class="fas fa-circle-check"></i> +30 Commandes </li>
                    <li><i class="fas fa-circle-check"></i> Support Rapide </li>
                    <li><i class="fas fa-circle-check"></i> Projet Prioritaire </li>
                </ul>
                </div>
            </div>
        </section>
        <section id="contact">
            <h2 class="reveal">Nous Rejoindre</h2> 
            <p class="reveal"> Venez vous joindre à la communauté qui transformera vos sites et serveurs un chef d'oeuvres !</p>
            <a href="https://discord.gg/GHArER67fr" target="_blank" class="reveal btn-discord"><i class="fab fa-discord"></i> Rejoindre maintenant <i class="fas fa-arrow-right"></i></a>
        </section>
        <section id="avist">
            <h2 class=reveal>Votre avis</h2>
            <div class="avis-container">
                <div class="stars">
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
            </div>
            <textarea id="avis" class="avis" placeholder="Écrivez votre avis ici..."></textarea>
            <button id="submit" class="btn-avis">Envoyer</button>
        </section>
        <footer>
            <p><i class="far fa-copyright"></i> 2026 Workshop. Tous droits réservés. | Created by</p> <a href="https://discord.com/users/1085264537139294270" target="_blank" class="aimnor">Aimnor</a>
        </footer>
	</body>
    <script>
        const burger = document.querySelector('.burger');
        
        burger.addEventListener('click', () => {
            burger.classList.toggle('active');
        });
    </script>
    <script>
        const menuHamburger = document.querySelector(".burger")
        const navlinks = document.querySelector(".nav-links")

        menuHamburger.addEventListener('click',()=>(
            navlinks.classList.toggle('mobile-menu')
        ))
    </script>
    <script>
        function revealOnScroll() {
            const reveals = document.querySelectorAll('.reveal');

            reveals.forEach(element => {
                const windowHeight = window.innerHeight;
                const elementTop = element.getBoundingClientRect().top;
                const revealPoint = 100;

                if (elementTop < windowHeight - revealPoint) {
                    element.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', revealOnScroll);
    </script>
    <script>
         const stars = document.querySelectorAll(".stars i");
      let rating = 0;
    
      stars.forEach((star, index) => {
        star.addEventListener("click", () => {
          rating = index + 1;
          stars.forEach((s, i) => {
            s.style.color = i < rating ? "#008000" : "#ccc";
          });
        });
      });
    
      
        document.getElementById("submit").addEventListener("click", async () => {
          const avis = document.getElementById("avis").value.trim();
        
          if (!avis) {
            alert("Écris un avis !");
            return;
          }
        
          if (rating === 0) {
            alert("Choisis une note !");
            return;
          }
        
          const storedUser = JSON.parse(localStorage.getItem("discord_user"));
        
          if (!storedUser) {
            alert("Tu dois être connecté pour laisser un avis !");
            return;
          }
        
          const username = storedUser.global_name || storedUser.username;
        
          const avatarURL = storedUser.avatar
            ? `https://cdn.discordapp.com/avatars/${storedUser.id}/${storedUser.avatar}.png`
            : null;
        
          const webhookURL = "https://discord.com/api/webhooks/1473793664672076074/_BZeYL8dd0EOrlpsVjKjBd8yQGDADAaYreuu5ut7WWq_cIP8uSSIrddmbbmrp19XdVga";
        
          try {
            await fetch(webhookURL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                embeds: [{
                  title: "⭐ Nouvel avis client",
                  color: 5763719,
                  thumbnail: avatarURL ? { url: avatarURL } : undefined,
                  fields: [
                    { name: "Utilisateur", value: username, inline: true },
                    { name: "Note", value: `${rating}/5`, inline: true },
                    { name: "Message", value: avis }
                  ],
                  timestamp: new Date().toISOString()
                }]
              })
            });
        
            alert("Avis envoyé !");
            document.getElementById("avis").value = "";
            stars.forEach(s => s.style.color = "#ccc");
            rating = 0;
        
          } catch (err) {
            alert("Erreur lors de l'envoi !");
            console.error(err);
          }
        });
    </script>
    <script>
    const CLIENT_ID = "1474022565939777536";
    const REDIRECT_URI = "https://aimnorweb.github.io/Discord-Workshop/";
    const SCOPES = "identify guilds";
    const TON_GUILD_ID = "1470534484905558048";
    
    const loginbtn = document.getElementById("login");
    const content = document.getElementById("content");
    
    // Fonction pour changer le texte du bouton
    function updateLoginButton(isLoggedIn) {
        loginbtn.textContent = isLoggedIn ? "Déconnexion" : "Se connecter";
    }
    
    // Fonction pour lancer OAuth Discord
    function login() {
        const url =
            `https://discord.com/api/oauth2/authorize` +
            `?client_id=${CLIENT_ID}` +
            `&redirect_uri=${encodeURIComponent(REDIRECT_URI)}` +
            `&response_type=token` +
            `&scope=${SCOPES}`;
        window.location.href = url;
    }
    
    // Vérifie si l'utilisateur est connecté et affiche ses infos
    async function checkLogin(token) {
        try {
            const resUser = await fetch("https://discord.com/api/users/@me", {
                headers: { Authorization: `Bearer ${token}` }
            });
            const user = await resUser.json();
            localStorage.setItem("discord_user", JSON.stringify(user));
    
            const resGuilds = await fetch("https://discord.com/api/users/@me/guilds", {
                headers: { Authorization: `Bearer ${token}` }
            });
            const guilds = await resGuilds.json();
    
            const estDansServeur = guilds.some(g => g.id === TON_GUILD_ID);
            const extension = user.banner.startsWith("a_") ? "gif" : "png";
    
            content.innerHTML = `
                <img src="https://cdn.discordapp.com/banners/${user.id}/${user.banner}.${extension}" width="240"><br>
                <img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.${extension}" width="80"> <p>Utilisateur : ${user.username}</p><br><p>Dans le serveur : ${estDansServeur ? "Oui" : "Non"}</p>
            `;
    
            updateLoginButton(true);
    
            // Bouton Déconnexion
            if (estDansServeur) {
                document.getElementById("login").onclick = () => {
                    localStorage.removeItem("discord_token");
                    updateLoginButton(false);
                    location.reload();
                };
            }
        } catch (err) {
            console.error(err);
            localStorage.removeItem("discord_token");
            updateLoginButton(false);
        }
    }
    if (window.location.hash) {
        const params = new URLSearchParams(window.location.hash.replace("#", "?"));
        const token = params.get("access_token");
    
        if (token) {
            localStorage.setItem("discord_token", token);
            window.history.replaceState({}, document.title, REDIRECT_URI);
        }
    }
    const savedToken = localStorage.getItem("discord_token");
    
    if (savedToken) {
        checkLogin(savedToken);
    } else {
        updateLoginButton(false);
        loginbtn.onclick = login;
    }
    </script>
</html>